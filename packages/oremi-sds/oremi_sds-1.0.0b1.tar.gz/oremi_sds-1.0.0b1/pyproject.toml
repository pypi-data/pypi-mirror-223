[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.poetry]
name = "oremi-sds"
version = "1.0.0.beta1"
description = "Oremi Sound Detector Server"
keywords = ["sound", "detector"]
authors = ["SÃ©bastien Demanou <demsking@gmail.com>"]
license = "Apache-2.0"
readme = "README.md"
repository = "https://gitlab.com/demsking/oremi-sds"
documentation = "https://gitlab.com/demsking/oremi-sds/-/blob/main/README.md"
classifiers = [
  "Development Status :: 2 - Pre-Alpha",
  "Environment :: Console",
  "Intended Audience :: Developers",
  "Natural Language :: English",
  "Natural Language :: French",
  "Topic :: Software Development :: Libraries :: Python Modules",
  "Programming Language :: Python :: 3.10",
]

include = [
  "config.json",
  "models",
  "schemas",
]

packages = [
  { include = "oremi-sds" },
]

[tool.poetry.scripts]
oremi-sds = 'oremi_sds:main'

[tool.poetry.urls]
"Say Thanks!" = "https://www.buymeacoffee.com/demsking"
"Source" = "https://gitlab.com/demsking/oremi-sds"
"Tracker" = "https://gitlab.com/demsking/oremi-sds/-/issues"

[tool.poetry.dependencies]
python = ">=3.10,<3.11"
pocketsphinx = "^5.0.0"
toml = "^0.10.2"
numpy = "^1.20"
coloredlogs = "^15.0.1"
websockets = "^11.0.3"
pydantic = "^2.1.1"
scipy = "^1.11.1"
tflite-support = "^0.4.4"
tflite-runtime = "^2.13.0"

[tool.poetry.group.dev.dependencies]
pytest = "^7.3.1"
pytest-cov = "^4.0.0"
pluggy = "^1.0.0"
pytest-asyncio = "^0.21.0"
pylint = {extras = ["spelling"], version = "^2.17.4"}
pyupgrade = "^3.6.0"
pylint-pydantic = "^0.2.4"

[tool.pytest.ini_options]
# Function starting with the following pattern are considered for test cases.
python_functions = "test_"

[tool.ruff]
ignore = [
  "E501",   # ignore line too long
  "D100",   # ignore missing docstrings in public module
  "D104",   # ignore missing docstrings in public package
  "D105",   # ignore missing docstrings in magic methods
  "RUF005", # admittedly an optimization of code rather than a fail
]
line-length = 128
select = ["E", "F", "W", "RUF"]

[tool.ruff.flake8-quotes]
docstring-quotes = "single"
inline-quotes = "single"

[tool.ruff.pydocstyle]
convention = "google"
