(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[815],{35400:function(e,n,t){"use strict";t.r(n),t.d(n,{RunRoot:function(){return pe},default:function(){return he}});var r,i=t(71171),o=t(90239),u=t(31623),a=t(47515),s=t(20356),c=t(83473),l=t(57103),d=t(95714),f=t(73070),p=t(67445),h=t(78193),m=t(50032),v=t(88949),x=t(74894),g=t(20822),y=t(68079),j=t(32667),w=t(22e3),S=t(14491),I=t(97412),b=t(85514),T=t(35936),A=new Intl.Collator(navigator.language,{sensitivity:"base"}),F=function(e){var n=e.assetKeys,t=e.evaluationId,r=h.useMemo((function(){return(0,y.Z)(n).sort((function(e,n){return A.compare(e.path.join("/"),n.path.join("/"))}))}),[n]);return(0,T.jsx)(f.J,{placement:"bottom",content:(0,T.jsxs)("div",{style:{width:"340px"},children:[(0,T.jsx)(a.x,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:j.w.KeylineGray},style:{fontWeight:600},children:"Auto-materialized"}),(0,T.jsx)(a.x,{flex:{direction:"column",gap:12},padding:{vertical:12},style:{maxHeight:"220px",overflowY:"auto"},children:r.map((function(e){var n=(0,b.p)(e,{view:"auto-materialize-history",evaluation:t});return(0,T.jsxs)(a.x,{padding:{vertical:8,left:12,right:16},flex:{direction:"row",justifyContent:"space-between",alignItems:"center",gap:8},style:{overflow:"hidden"},children:[(0,T.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},style:{overflow:"hidden"},children:[(0,T.jsx)(w.JO,{name:"asset"}),(0,T.jsx)(S.g,{text:e.path.join("/")})]}),(0,T.jsx)(I.rU,{to:n,style:{whiteSpace:"nowrap"},children:"View evaluation"})]},n)}))})]}),interactionKind:"hover",children:(0,T.jsx)(d.V,{icon:"auto_materialize_policy",children:"Auto-materialized"})})},k=t(67099),O=t(24265),R=t(46856),E=t(92761),K=t(66708),_=t(80500),C=t(74492),L=t(33028),N=t(96234),Z=t(60319),z=t(17868),V=t(84464),q=t(80005),U=t(62709),D=t(92014),Q=t(99641),J=t(92764),P=t(23555),M=t(46860),W=t(75418),G=t(68365),H=t(33657),B=t(26390),X=t(20317),$=t(90039),Y=t(86252),ee=t(70037),ne=t(90986),te=t(41084),re=t(75731),ie=t(50466),oe=function(e){var n,t=e.run,r=e.runId,i=(0,ie.Bz)(),o=(0,N.Z)(i,2),u=o[0],a=o[1],s=(0,M.q)({queryKey:"selection",defaults:{selection:""}}),c=(0,N.Z)(s,2),l=c[0],d=c[1];n=t?function(e){switch(e){case P.VOA.FAILURE:return"/favicon-run-failed.svg";case P.VOA.SUCCESS:return"/favicon-run-success.svg";case P.VOA.STARTING:case P.VOA.STARTED:case P.VOA.CANCELING:return"/favicon-run-pending.svg";default:return"/favicon.svg"}}(t.status):"/favicon.svg",h.useEffect((function(){var e=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(e){var t=e.getAttribute("href");return e.setAttribute("href",n),function(){t&&e.setAttribute("href",t)}}}),[n]),(0,k.j)(t?"".concat((0,g.pv)(t.pipelineName)?"":t.pipelineName," ").concat(r.slice(0,8)," [").concat(t.status,"]"):"Run: ".concat(r));var f=function(e,n){var t=n.find((function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e}));t&&(0,q._)({body:(0,T.jsx)(D.T9,{error:t})})},p=function(e){d(e),a((0,L.Z)((0,L.Z)({},u),{},{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return(0,T.jsx)(ee.A.Provider,{value:t,children:(0,T.jsx)(B.C,{runId:r,children:function(e){return(0,T.jsx)(ne.jp,{logs:e,children:function(n){return(0,T.jsx)(ue,{run:t,runId:r,logs:e,logsFilter:u,metadata:n,selectionQuery:l,onSetLogsFilter:a,onSetSelectionQuery:p,onShowStateDetails:f})}})}},r)})},ue=function(e){var n=e.run,t=e.runId,r=e.logs,i=e.logsFilter,o=e.metadata,u=e.selectionQuery,s=e.onSetLogsFilter,c=e.onSetSelectionQuery,l=(0,re.W)(n),d=h.createRef(),f=(0,M.q)({queryKey:"logType",defaults:{logType:"structured"}}),m=(0,N.Z)(f,2),v=m[0],x=m[1],g=function(e){switch(e){case"stdout":return $.hi.stdout;case"stderr":return $.hi.stderr;default:return $.hi.structured}}(v),j=h.useState(null),w=(0,N.Z)(j,2),S=w[0],I=w[1],b=JSON.stringify(Object.keys(o.steps).sort()),A=h.useMemo((function(){return JSON.parse(b)}),[b]),F=(null===n||void 0===n?void 0:n.executionPlan)&&(0,J.J)(null===n||void 0===n?void 0:n.executionPlan,o.steps),k=h.useMemo((function(){return F&&u&&"*"!==u?(0,U.V)(F,u).all.map((function(e){return e.name})):[]}),[F,u]),O=(0,W.a)(),R=(0,te.r)({stepKeys:A,selectionStepKeys:k,metadata:o}),E=R.logCaptureInfo,K=R.computeLogFileKey,_=R.setComputeLogFileKey,C=F?i.logQuery.filter((function(e){return e.token&&"query"===e.token})).reduce((function(e,n){return[].concat((0,y.Z)(e),(0,y.Z)((0,U.V)(F,n.value).all.map((function(e){return e.name}))))}),[]):[],L=function(e,n){var t,r=k.indexOf(e),i='"'.concat(e,'"');if(n.shiftKey)t=(0,y.Z)(k.map((function(e){return u.includes('"'.concat(e,'"'))?'"'.concat(e,'"'):e}))),-1!==r?t.splice(r,1):t.push(i);else if(1===k.length&&-1!==r)t=[];else{t=[i];var a=(0,te.c)(o.logCaptureSteps,e);a&&_(a)}c(t.join(", ")||"*")};return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(V.OS,{ref:d,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:function(e){return n?"QUEUED"===n.status?(0,T.jsx)(Q.Fu,{run:n}):n.executionPlan&&F?(0,T.jsx)(z.S,{region:"gantt chart",children:(0,T.jsx)(Q.hj,{options:{mode:Q.hS.WATERFALL_TIMED},toolbarActions:(0,T.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,T.jsx)(V.jo,{axis:"vertical",container:d}),(0,T.jsx)(Y.NX,{run:n,onLaunch:l,graph:F,metadata:e,selection:{query:u,keys:k}})]}),runId:t,graph:F,metadata:e,selection:{query:u,keys:k},onClickStep:L,onSetSelection:c,focusedTime:i.focusedTime})}):(0,T.jsx)(p.t,{icon:"error",title:"Unable to build execution plan"}):(0,T.jsx)(Q.ZW,{runId:t})}(o),second:(0,T.jsx)(z.S,{region:"logs",children:(0,T.jsxs)(ae,{children:[(0,T.jsx)($.KZ,{logType:g,onSetLogType:function(e){return x($.hi[e])},filter:i,onSetFilter:s,steps:A,metadata:o,computeLogFileKey:K,onSetComputeLogKey:_,computeLogUrl:S,counts:r.counts}),g!==$.hi.structured?O?(0,T.jsx)(G.h,{logKey:K?[t,"compute_logs",K]:[],logCaptureInfo:E,visibleIOType:$.hi[g],onSetDownloadUrl:I}):(0,T.jsx)(H.K,{runId:t,computeLogFileKey:A.length?K:void 0,ioType:$.hi[g],setComputeLogUrl:I}):(0,T.jsx)(X.S,{logs:r,filter:i,filterStepKeys:C,filterKey:"".concat(JSON.stringify(i)),metadata:o})]})})})})},ae=Z.ZP.div.withConfig({displayName:"Run__LogsContainer",componentId:"sc-1l2e0ac-0"})(["display:flex;flex-direction:column;height:100%;"]),se=t(24138),ce=t(42236),le=t(25465),de=t(68506),fe=t(89622),pe=function(){var e;(0,x.Px)();var n=(0,m.UO)().runId;(0,k.j)(n?"Run ".concat(n.slice(0,8)):"Run");var t=(0,o.a)(ve,{variables:{runId:n}}),r=t.data,i=t.loading,u="Run"===(null===r||void 0===r?void 0:r.pipelineRunOrError.__typename)?r.pipelineRunOrError:null,p=null===u||void 0===u?void 0:u.pipelineSnapshotId,y=(0,_.n)(u),j=null!==y&&void 0!==y&&y.match?(0,K.kQ)(y.match.repository.name,y.match.repositoryLocation.name):null,w=h.useMemo((function(){return!!(u&&y&&(0,E.E8)(y.match,u.pipelineName))}),[u,y]),S=h.useMemo((function(){return(null===u||void 0===u?void 0:u.tags.find((function(e){return e.key===de.H.AssetEvaluationID})))||null}),[u]);return(0,T.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,T.jsx)(a.x,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,T.jsx)(s.m,{title:(0,T.jsx)(c.X6,{style:{fontFamily:l.b.monospace,fontSize:"20px"},children:n.slice(0,8)}),tags:u?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(le.KG,{status:u.status}),(0,g.pv)(u.pipelineName)?(0,T.jsx)(C.m,{assetKeys:(0,fe.Bo)(u),useTags:!0}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(d.V,{icon:"run",children:["Run of"," ",(0,T.jsx)(O.h,{pipelineName:null===u||void 0===u?void 0:u.pipelineName,pipelineHrefContext:j||"repo-unknown",snapshotId:p,size:"small",isJob:w})]}),(0,T.jsx)(C.m,{assetKeys:u.assets.map((function(e){return e.key})),useTags:!0})]}),(0,T.jsxs)(a.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[null!==u&&void 0!==u&&u.startTime?(0,T.jsx)(f.J,{interactionKind:"hover",placement:"bottom",content:(0,T.jsx)(a.x,{padding:16,children:(0,T.jsx)(se.lc,{run:u,loading:i})}),children:(0,T.jsx)(d.V,{icon:"schedule",children:(0,T.jsx)(R.v,{timestamp:u.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):u.updateTime?(0,T.jsx)(d.V,{icon:"schedule",children:(0,T.jsx)(R.v,{timestamp:u.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,null!==u&&void 0!==u&&u.startTime&&null!==u&&void 0!==u&&u.endTime?(0,T.jsx)(f.J,{interactionKind:"hover",placement:"bottom",content:(0,T.jsx)(a.x,{padding:16,children:(0,T.jsx)(se.lc,{run:u,loading:i})}),children:(0,T.jsx)(d.V,{icon:"timer",children:(0,T.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:null!==u&&void 0!==u&&u.startTime?(0,v.fv)((1e3*(null===u||void 0===u?void 0:u.endTime)||Date.now())-1e3*(null===u||void 0===u?void 0:u.startTime)):"\u2013"})})}):null,S&&null!==(e=u.assetSelection)&&void 0!==e&&e.length?(0,T.jsx)(F,{assetKeys:u.assetSelection,evaluationId:S.value}):null]})]}):null,right:u?(0,T.jsx)(se.Up,{run:u,isJob:w}):null})}),(0,T.jsx)(me,{data:r,runId:n})]})},he=pe,me=function(e){var n=e.data,t=e.runId;return n&&n.pipelineRunOrError?"Run"!==n.pipelineRunOrError.__typename?(0,T.jsx)(a.x,{padding:{vertical:64},children:(0,T.jsx)(p.t,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})}):(0,T.jsx)(oe,{run:n.pipelineRunOrError,runId:t}):(0,T.jsx)(oe,{run:void 0,runId:t})},ve=(0,u.Ps)(r||(r=(0,i.Z)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunPageFragment\n      }\n    }\n  }\n\n  ","\n"])),ce.tQ)},75731:function(e,n,t){"use strict";t.d(n,{W:function(){return f}});var r=t(32723),i=t(34795),o=t(96234),u=t(15541),a=t(78193),s=t(50032),c=t(93809),l=t(80500),d=t(89622),f=function(e){var n=(0,s.k6)(),t=(0,u.D)(d.kO),f=(0,o.Z)(t,1)[0],p=(0,l.n)(e);return a.useCallback(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o,u,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.pipelineSnapshotId&&p){t.next=2;break}return t.abrupt("return");case 2:return o=(0,d.kz)({run:e,style:i,repositoryLocationName:p.match.repositoryLocation.name,repositoryName:p.match.repository.name}),t.prev=3,t.next=6,f({variables:o});case 6:a=t.sent,(0,d.lF)(e.pipelineName,null===(u=a.data)||void 0===u?void 0:u.launchPipelineReexecution,n,{preserveQuerystring:!0,behavior:"open"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),(0,c.t)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),[n,f,p,e])}},48652:function(e,n,t){var r=t(39865),i={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};function o(){}function u(){var e=new Set,n=new Set,t=0;return{next:r,cancel:r,clearAll:function(){e.clear(),n.clear(),cancelAnimationFrame(t),t=0}};function r(e){n.add(e),t||(t=requestAnimationFrame(i))}function i(){t=0;var r=n;n=e,(e=r).forEach((function(e){e()})),e.clear()}}e.exports=function(e,n,t){var r=Object.create(null),u=Object.create(null),a="function"===typeof(t=t||{}).easing?t.easing:i[t.easing];a||(t.easing&&console.warn("Unknown easing function in amator: "+t.easing),a=i.ease);var s="function"===typeof t.step?t.step:o,c="function"===typeof t.done?t.done:o,l=function(e){if(!e){return"undefined"!==typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}if("function"!==typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!==typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}(t.scheduler),d=Object.keys(n);d.forEach((function(t){r[t]=e[t],u[t]=n[t]-e[t]}));var f,p="number"===typeof t.duration?t.duration:400,h=Math.max(1,.06*p),m=0;return f=l.next((function n(){var t=a(m/h);m+=1,v(t),m<=h?(f=l.next(n),s(e)):(f=0,setTimeout((function(){c(e)}),0))})),{cancel:function(){l.cancel(f),f=0}};function v(n){d.forEach((function(t){e[t]=u[t]*n+r[t]}))}},e.exports.makeAggregateRaf=u,e.exports.sharedScheduler=u()},39865:function(e){var n=.1,t="function"===typeof Float32Array;function r(e,n){return 1-3*n+3*e}function i(e,n){return 3*n-6*e}function o(e){return 3*e}function u(e,n,t){return((r(n,t)*e+i(n,t))*e+o(n))*e}function a(e,n,t){return 3*r(n,t)*e*e+2*i(n,t)*e+o(n)}function s(e){return e}e.exports=function(e,r,i,o){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===r&&i===o)return s;for(var c=t?new Float32Array(11):new Array(11),l=0;l<11;++l)c[l]=u(l*n,e,i);function d(t){for(var r=0,o=1;10!==o&&c[o]<=t;++o)r+=n;--o;var s=r+(t-c[o])/(c[o+1]-c[o])*n,l=a(s,e,i);return l>=.001?function(e,n,t,r){for(var i=0;i<4;++i){var o=a(n,t,r);if(0===o)return n;n-=(u(n,t,r)-e)/o}return n}(t,s,e,i):0===l?s:function(e,n,t,r,i){var o,a,s=0;do{(o=u(a=n+(t-n)/2,r,i)-e)>0?t=a:n=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,r,r+n,e,i)}return function(e){return 0===e?0:1===e?1:u(d(e),r,o)}}},86357:function(e,n,t){var r=t(10243);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},93550:function(e){e.exports=function(e,n,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(n,e[r]))return!0;return!1}},14269:function(e){e.exports=function(e,n,t,r){for(var i=e.length,o=t+(r?1:-1);r?o--:++o<i;)if(n(e[o],o,e))return o;return-1}},10243:function(e,n,t){var r=t(14269),i=t(71427),o=t(84751);e.exports=function(e,n,t){return n===n?o(e,n,t):r(e,i,t)}},71427:function(e){e.exports=function(e){return e!==e}},57491:function(e,n,t){var r=t(67268),i=t(86357),o=t(93550),u=t(59390),a=t(28809),s=t(27525);e.exports=function(e,n,t){var c=-1,l=i,d=e.length,f=!0,p=[],h=p;if(t)f=!1,l=o;else if(d>=200){var m=n?null:a(e);if(m)return s(m);f=!1,l=u,h=new r}else h=n?[]:p;e:for(;++c<d;){var v=e[c],x=n?n(v):v;if(v=t||0!==v?v:0,f&&x===x){for(var g=h.length;g--;)if(h[g]===x)continue e;n&&h.push(x),p.push(v)}else l(h,x,t)||(h!==p&&h.push(x),p.push(v))}return p}},28809:function(e,n,t){var r=t(66938),i=t(14669),o=t(27525),u=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=u},84751:function(e){e.exports=function(e,n,t){for(var r=t-1,i=e.length;++r<i;)if(e[r]===n)return r;return-1}},14669:function(e){e.exports=function(){}},23662:function(e,n,t){var r=t(57491);e.exports=function(e){return e&&e.length?r(e):[]}}}]);
//# sourceMappingURL=815.69e3a416.chunk.js.map