"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[728],{8790:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});var n=t(4341),l=t(557),o=t(1332),d=t(2721),s=t(9113),r=t(5993),i=t(7590),c=t(371),u=t(7976),p=t.n(u),m=t(4945);function g(e){const a=e.split("/");return a[0]+"//"+a[2]}var y=t(3139),f=t(9577),h=t(2949),v=t(2699),_=t.n(v),N=t(6837),E=t.n(N),k=t(3197),w=t.n(k),Z=t(4383),C=t.n(Z),b=t(7600),x=t.n(b),P=t(5918),S=t.n(P),I=t(9944),T={};T.styleTagTransform=S(),T.setAttributes=C(),T.insert=w().bind(null,"head"),T.domAPI=E(),T.insertStyleElement=x(),_()(I.Z,T),I.Z&&I.Z.locals&&I.Z.locals,t(263);const j="SPECIALNULLVALUEDONOTSETEVER",B=m.z.array(m.z.any());function A({arg:e,callUpdate:a,argValue:t,setArg:n,setNode:d,idx:s,optional:r=!1}){const i=(0,u.useRef)(null),c=t?t.mode:"File"===e.type?"input":"node",m=t?t.value:t,g=e=>{n&&n({mode:c,value:e})};return(0,u.useEffect)((()=>{t||"input"!=c&&!r||!n||g(j)}),[t,r,c,n]),(0,u.useEffect)((()=>{"input"===c&&i.current&&i.current.offsetTop&&i.current.clientHeight&&(console.log("OFFSET"),d((e=>{const a={...e.input_handles?e.input_handles:{},[s]:(i.current?.offsetTop??0)-28};return{...e,input_handles:a,num_inputs:Object.keys(a).length}})),a())}),[c,i]),(0,u.useEffect)((()=>{"node"===c&&(d((e=>{const a={...e.input_handles?e.input_handles:{}};return a[s]&&delete a[s],{...e,num_inputs:Object.keys(a).length,input_handles:a}})),a())}),[c]),"Option"===e.type?p().createElement(A,{arg:{name:e.name,ty:e.ty.inner,type:e.ty._type},callUpdate:a,argValue:t,setArg:n,setNode:d,idx:s,optional:!0}):p().createElement("div",{className:"flex flex-row space-x-2 items-center w-full",ref:i},p().createElement(U,{className:"nodrag",onClick:e=>{e.stopPropagation()},size:"small",value:c,onChange:e=>{"node"===e?(e=>{n&&n({mode:e,value:m})})(e.toString()):((e,a)=>{n&&n({mode:e,value:a})})(e.toString(),j)},options:[{label:p().createElement(l.Z,{title:"External Input"},p().createElement(F,null)),value:"input"},{label:p().createElement(l.Z,{title:"UI Popup"},p().createElement(L,null)),value:"ui",disabled:!0},{label:p().createElement(l.Z,{title:"Hardcode"},p().createElement(V,null)),value:"node",disabled:"File"===e.type}]}),p().createElement(D,null,e.name,r?null:p().createElement("span",{style:{color:"red"}},"*")),(()=>{switch(e.type){case"Choice":return p().createElement(G,{className:"nodrag",disabled:"node"!==c,value:m&&m!=j?m:void 0,options:e.ty.choices.map((e=>({value:e,label:e}))),onChange:e=>{g(e)}});case"Num":return p().createElement($,{className:"nodrag",disabled:"node"!==c,min:e.ty.min_value??void 0,max:e.ty.max_value??void 0,value:m&&m!=j?m:void 0,onChange:e=>{e&&g(e)}});case"String":return e.ty.secret?p().createElement(z,{className:"nodrag",disabled:"node"!==c,value:m&&m!=j?m:void 0,onChange:e=>{g(e.target.value)}}):p().createElement(H,{className:"nodrag",disabled:"node"!==c,value:m&&m!=j?m:void 0,onChange:e=>{g(e.target.value)}});case"Json":case"File":case"Dir":case"Func":case"Funcs":return null;case"Bool":return p().createElement(o.Z,{disabled:"node"!==c,onChange:e=>{g(e)},checked:m&&m!=j?m:e.ty.default});default:throw e.type,new Error("Unhandled argument type")}})())}const O=function({callAfterUpdateInpOuts:e=(()=>{}),node:a,setNode:t}){const n=B.safeParse(a.data).success?a.data:Array(a.metadata.args.length).fill(null),l=B.length(a.metadata.args.length).safeParse(a.data).success;return(0,u.useEffect)((()=>{l||(t((e=>({...e,data:Array(a.metadata.args.length).fill(null),operator:a.metadata.lambda?`${a.metadata.lambda}/operator/${a.metadata.operator}`:`${g(a.remote.url)}/operator/${a.metadata.operator}`,num_inputs:0,num_outputs:a.metadata.num_outputs}))),e())}),[a]),p().createElement(R,null,a.metadata.name?p().createElement(J,null,a.metadata.name):null,a.metadata.description?p().createElement(d.Z.Paragraph,null,a.metadata.description):null,a.metadata.args.map(((a,o)=>p().createElement(A,{arg:a,key:o,idx:o,callUpdate:e,argValue:n[o],setNode:t,setArg:l?e=>{t((a=>({...a,data:a.data.map(((a,t)=>t===o?e:a))})))}:void 0}))))};var U=(0,n.ZP)(s.Z).withConfig({displayName:"BaseNode___StyledSegmented",componentId:"sc-vkkiaj-0"})({pointerEvents:"auto",cursor:"pointer"}),F=(0,n.ZP)(y.Z).withConfig({displayName:"BaseNode___StyledLoginOutlined",componentId:"sc-vkkiaj-1"})({paddingTop:"3px"}),L=(0,n.ZP)(f.Z).withConfig({displayName:"BaseNode___StyledPlayCircleOutlined",componentId:"sc-vkkiaj-2"})({paddingTop:"3px"}),V=(0,n.ZP)(h.Z).withConfig({displayName:"BaseNode___StyledPicCenterOutlined",componentId:"sc-vkkiaj-3"})({paddingTop:"3px"}),D=(0,n.ZP)(d.Z.Text).withConfig({displayName:"BaseNode___StyledTypographyText",componentId:"sc-vkkiaj-4"})({width:"fit-content",whiteSpace:"nowrap"}),G=(0,n.ZP)(r.Z).withConfig({displayName:"BaseNode___StyledSelect",componentId:"sc-vkkiaj-5"})({flexGrow:"1"}),$=(0,n.ZP)(i.Z).withConfig({displayName:"BaseNode___StyledInputNumber",componentId:"sc-vkkiaj-6"})({flexGrow:"1"}),z=(0,n.ZP)(c.Z.Password).withConfig({displayName:"BaseNode___StyledInputPassword",componentId:"sc-vkkiaj-7"})({flexGrow:"1"}),H=(0,n.ZP)(c.Z).withConfig({displayName:"BaseNode___StyledInput",componentId:"sc-vkkiaj-8"})({flexGrow:"1"}),R=(0,n.ZP)("div").withConfig({displayName:"BaseNode___StyledDiv",componentId:"sc-vkkiaj-9"})({display:"flex",width:"24rem",flexDirection:"column","> :not([hidden]) ~ :not([hidden])":{"--tw-space-y-reverse":"0",marginTop:"calc(0.5rem * calc(1 - var(--tw-space-y-reverse)))",marginBottom:"calc(0.5rem * var(--tw-space-y-reverse))"}}),J=(0,n.ZP)(d.Z.Text).withConfig({displayName:"BaseNode___StyledTypographyText2",componentId:"sc-vkkiaj-10"})({fontWeight:"700"})},9944:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(4496),l=t.n(n),o=t(5125),d=t.n(o)()(l());d.push([e.id,"svg {\n  display: inline-block !important;\n  vertical-align: baseline !important;\n}\n",""]);const s=d}}]);