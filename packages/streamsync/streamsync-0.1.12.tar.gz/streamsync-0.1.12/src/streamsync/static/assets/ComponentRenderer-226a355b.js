import{d as F,i as A,b as g,q as ne,c as f,o as P,e as T,f as a,t as x,u as N,l as H,_ as V,Q as oe,r as B,B as L,R as M,O as U,S as $,U as ae,D as le,w as O,v as W,h as ce,F as ie,y as re,n as X,p as z,j as Y,k as de,s as ue,x as pe,P as _e}from"./index-fa51a82a.js";const ve={class:"ChildlessPlaceholder"},me={class:"content"},fe={class:"title"},he={key:0,class:"message"},ge=F({__name:"ChildlessPlaceholder",props:{componentId:null},setup(i){const d=i,C=10,o=A(g.core),{componentId:l}=ne(d),p=f(()=>o.getComponentById(l.value)),_=f(()=>o.getComponentDefinition(p.value.type)),v=(h,r)=>{const n=h.map(y=>o.getComponentDefinition(y)).map(y=>y==null?void 0:y.name);return`${n.slice(0,-1).join(", ")} ${n.length>1?r:""} ${n.at(-1)}`},I=f(()=>{const h=o.getContainableTypes(l.value);let r;return h.length<=C&&(r=`You can add ${v(h,"and")} components`),r});return(h,r)=>(P(),T("div",ve,[a("div",me,[a("div",fe,[a("h2",null,"Empty "+x(N(_).name),1)]),N(I)?(P(),T("div",he,x(N(I)),1)):H("",!0)])]))}});const Ce=V(ge,[["__scopeId","data-v-b958fd6f"]]),ye=i=>()=>M("div",`Component type ${i} not supported.`),be={props:["componentId","instancePath","instanceData"],setup(i){const d=A(g.core),C=A(g.builderManager),o=i.componentId,l=f(()=>d.getComponentById(o)),p=oe[l.value.type];if(!p)return ye(l.value.type);const _=i.instancePath,v=i.instanceData,{getEvaluatedFields:I,isComponentVisible:h}=U(d),r=I(_),e=f(()=>d.getComponents(o,!0)),n=f(()=>!!C&&C.getMode()!="preview"),m=()=>{if(!(e.value.length>0))return M(Ce,{componentId:l.value.id})},y=(t,s=0)=>M(q,{componentId:t,key:`${t}:${s}`,instancePath:[..._,{componentId:t,instanceNumber:s}],instanceData:[...v,B(null)]}),D=(t=0,s=()=>!0,c=!1)=>{const u=b=>M("div",{"data-streamsync-slot-of-id":o,"data-streamsync-position":b}),S=n.value&&!c,E=e.value.filter(s).map((b,K)=>[y(b.id,t),...S?[u(K+1)]:[]]);return[...S?[u(0)]:[]].concat(E.flat())};$(g.evaluatedFields,r),$(g.componentId,o),$(g.isBeingEdited,n),$(g.instancePath,_),$(g.instanceData,v),$(g.renderProxiedComponent,y),$(g.getChildrenVNodes,D);const G={"data-streamsync-id":o,"data-streamsync-instance-path":(t=>t.map(s=>`${s.componentId}:${s.instanceNumber}`).join(","))(_)},k=B(!1);L(()=>(C==null?void 0:C.getSelectedId())==o,t=>{k.value=t}),L(()=>r,()=>{k.value=!1},{deep:!0});const j=f(()=>e.value.length==0),Q=f(()=>h(o,_)),J=t=>{if(!t.startsWith("$"))return c=>d.forwardEvent(c,_);if(t.startsWith("$goToPage_")){const c=t.substring(10);return u=>d.setActivePageFromKey(c)}return null},Z=f(()=>{const t={};if(l.value.binding){const s=l.value.binding.eventType,c=`on${s.charAt(0).toUpperCase()}${s.slice(1)}`;t[c]=u=>d.forwardEvent(u,_)}return Object.entries(l.value.handlers??{}).forEach(([s,c])=>{const u=`on${s.charAt(0).toUpperCase()}${s.slice(1)}`;t[u]=J(c)}),t}),ee=f(()=>{var c;const t=(c=d.getComponentDefinition(l.value.type))==null?void 0:c.fields;if(!t)return;const s={};return Object.keys(t).forEach(u=>{t[u].applyStyleVariable&&r[u]&&(s[`--${u}`]=r[u].value)}),s}),te=f(()=>{var E;const t="cssClasses",s=(E=d.getComponentDefinition(l.value.type))==null?void 0:E.fields;if(!s||!s[t]||!r[t])return;const c=r[t].value,u=c==null?void 0:c.split(" ").map(b=>b.trim()),S={};return u.forEach(b=>{S[b]=!0}),S}),se=function(){return{class:{component:!0,childless:j.value,selected:k.value,...te.value},style:{...ee.value,...Q.value?{}:{display:"none"}},...G,...Z.value,draggable:n.value}};return()=>{const t=n.value?m():void 0,s=({instanceNumber:S=0,componentFilter:E=()=>!0,positionlessSlot:b=!1})=>j.value?b?void 0:t:D(S,E,b),c={...se()};return M(p,c,{default:s})}}};const q=V(be,[["__scopeId","data-v-18ed158d"]]),w=i=>(z("data-v-cbbb395f"),i=i(),Y(),i),Ie=w(()=>a("i",{class:"ri-notification-2-line ri-xl"},null,-1)),Se={class:"counter"},$e=w(()=>a("div",{class:"balloonFlash"},null,-1)),Pe={class:"main"},Ee=w(()=>a("i",{class:"ri-close-line"},null,-1)),xe=w(()=>a("i",{class:"ri-error-warning-fill ri-xl"},null,-1)),Te=[xe],Be={class:"content"},De={class:"title"},Me={class:"time"},Ne={class:"message"},Ae=F({__name:"RendererNotifications",setup(i){const C=A(g.core),o=B(!1),l=B(null),p=ae([]),_=h=>{const{type:r,title:e,message:n,code:m}=h;p.unshift({type:r,title:e,message:n,code:m,timestampReceived:new Date}),p.splice(100),l.value.classList.remove("alert"),l.value.offsetWidth,l.value.classList.add("alert")};le(()=>{C.addMailSubscription("notification",_)});const v=()=>{p.length!=0&&(o.value=!o.value)},I=()=>{p.splice(0),o.value=!1};return(h,r)=>O((P(),T("div",{class:"RendererNotifications",onClick:v},[a("div",{class:"balloon",ref_key:"balloon",ref:l,title:"Toggle notifications"},[Ie,a("div",Se,x(p.length),1)],512),$e,O(a("div",Pe,[a("div",{class:"clearContainer"},[a("button",{onClick:I},[Ee,ce(" Clear all ")])]),(P(!0),T(ie,null,re(p,(e,n)=>(P(),T("div",{class:"notification",key:n},[a("div",{class:X(["icon",e.type])},Te,2),a("div",Be,[a("header",null,[a("strong",De,x(e.title),1),a("span",Me,x(e.timestampReceived.toLocaleTimeString()),1)]),a("div",Ne,x(e.message),1)])]))),128))],512),[[W,o.value]])],512)),[[W,p.length>0]])}});const Ve=V(Ae,[["__scopeId","data-v-cbbb395f"]]),we=i=>(z("data-v-6abd8afe"),i=i(),Y(),i),Re=we(()=>a("div",{class:"loadingBar"},null,-1)),ke={class:"rootComponentArea"},Le=F({__name:"ComponentRenderer",setup(i){const d=A(g.core),C=U(d),o=d.getComponents();o.length==0&&console.error("No pages found.");const l=[{componentId:"root",instanceNumber:0}],p=[B(null)],_=B(o[0]),v=C.getEvaluatedFields(l),I=f(()=>{var e,n,m,y,D,R;return{"--accentColor":(e=v.accentColor)==null?void 0:e.value,"--emptinessColor":(n=v.emptinessColor)==null?void 0:n.value,"--containerBackgroundColor":(m=v.parentIdBackgroundColor)==null?void 0:m.value,"--primaryTextColor":(y=v.primaryTextColor)==null?void 0:y.value,"--secondaryTextColor":(D=v.secondaryTextColor)==null?void 0:D.value,"--separatorColor":(R=v.separatorColor)==null?void 0:R.value}}),h=f(()=>d.isMessagePending.value);L(()=>{var e;return(e=v.appName)==null?void 0:e.value},e=>{r(e)},{immediate:!0});function r(e){const n=d.getMode();let m;e&&n=="edit"?m=`${e} | Streamsync Builder`:!e&&n=="edit"?m="Streamsync Builder":e&&n=="run"?m=`${e}`:!e&&n=="run"&&(m="Streamsync App"),document.title=m}return(e,n)=>(P(),T("div",{class:X(["ComponentRenderer",{loadingActive:N(h)}]),tabindex:"-1",style:_e(N(I))},[de(Ve,{class:"notifications"}),Re,a("div",ke,[_.value?(P(),ue(q,{key:0,"component-id":_.value.id,"instance-path":l,"instance-data":p},null,8,["component-id"])):H("",!0),pe(e.$slots,"default",{},void 0,!0)])],6))}});const Ke=V(Le,[["__scopeId","data-v-6abd8afe"]]);export{Ke as default};
