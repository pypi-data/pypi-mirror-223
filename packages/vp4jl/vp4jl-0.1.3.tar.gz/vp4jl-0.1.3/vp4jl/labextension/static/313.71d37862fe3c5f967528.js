"use strict";(self.webpackChunkvp4jl=self.webpackChunkvp4jl||[]).push([[313],{9137:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var o,a,i,s=n(8220),r=n(8905),l=n(2385),d=n(4664),c=n(8035),u=n(8861),m=n(8833),p=n(6029),h=n.n(p),g=n(8778),v=n(3150),C=n(6322),x=n(5779);n(6250);class b extends m.ReactWidget{constructor(e,t){super(),this._editor_activated=!1,this.id=e,this._model=t,this._model.vpContentChanged.connect(this.update,this)}get model(){return this._model}activate(){this._editor_activated||(this._editor_activated=!0,this.update())}deactivate(){this._editor_activated&&(this._editor_activated=!1,this.update())}_updateToolbar(){["copy","paste","cut","duplicate","delete"].forEach((e=>{this.model.toolbarItems[e].widget.update()}))}render(){return h().createElement(x.VPEditor,{id:this.id,content:this._model.vpContent,onContentChange:this._model.setVpContent.bind(this._model),activated:this._editor_activated,onSceneActionsInit:this._model.setVpActions.bind(this._model),onSelectionChange:this._updateToolbar.bind(this)})}}class f extends m.ReactWidget{constructor(e,t,n,o){super(),this.icon=e,this.label=t,this.tooltip=n,this.onClick=o}render(){return h().createElement(c.ToolbarButtonComponent,{icon:this.icon,label:this.label,tooltip:this.tooltip,onClick:this.onClick})}}class w extends c.Toolbar{constructor(){super(),this.addClass("jp-vp-output-area-toolbar"),this._createToolbarItems()}_createToolbarItems(){var e;this.addItem("spacer",c.Toolbar.createSpacerItem()),this.addItem("clear",(e=()=>{var e;return null===(e=this.parent)||void 0===e?void 0:e.clear()},new f(c.clearIcon,"Clear","Clear the output window",e))),this.addItem("close",function(e){return new f(c.closeIcon,"Close","Close the output window",e)}((()=>{var e;return null===(e=this.parent)||void 0===e?void 0:e.hide()})))}}class E extends m.MainAreaWidget{constructor(e,t,n){super({content:new C.OutputArea({rendermime:t.rendermime,model:new C.OutputAreaModel}),toolbar:new w}),this.sessionContext=n,this.id=e+"output",this.addClass("jp-vp-output-area"),this.title.label="Output"}showErrorMsg(e){this.content.model.clear(),this.content.model.add({output_type:"error",ename:"Error",evalue:e,traceback:[]})}execute(e){C.OutputArea.execute(e,this.content,this.sessionContext).catch((e=>{this.showErrorMsg(e.message)}))}clear(){this.content.model.clear()}toggleOutput(){this.isHidden?this.show():this.hide()}}class _ extends g.SplitPanel{constructor(e,t,n){super({orientation:"vertical",spacing:1}),this._model=void 0,this.id=e+"panel",this._model=t,this._sessionContext=n,this.addClass("jp-vp-main-area-panel"),this._vpEditor=new b(e,t),this.addWidget(this._vpEditor),this._outputArea=new E(e,t,n),this.addWidget(this._outputArea),this.setRelativeSizes([4,1])}activate(){this._vpEditor&&this._vpEditor.activate()}deactivate(){this._vpEditor&&this._vpEditor.deactivate()}execute(){var e,t;const n=null===(t=null===(e=this._model)||void 0===e?void 0:e.vpActions)||void 0===t?void 0:t.sourceCode();n&&(n.hasError?this._outputArea.showErrorMsg(n.result):this._outputArea.execute(n.result))}toggleOutput(){this._outputArea.toggleOutput()}get sessionContext(){return this._sessionContext}}class y extends v.DocumentWidget{constructor(e,t){super({context:t,content:new _(e,t.model,t.sessionContext)}),this.title.iconClass="jp-VPIcon",this.title.caption="Visual Programming",this.addClass("jp-VPWidget"),this.toolbar.addClass("jp-vp-toolbar"),this.context.ready.then(this._onContextReady.bind(this)),this.model.kernelSpecChanged.connect(this._changeKernel,this),this.sessionContext.kernelChanged.connect(this._setModelKernelSpec,this)}get model(){return this.context.model}get sessionContext(){return this.context.sessionContext}execute(){this.content.execute()}toggleOutput(){this.content.toggleOutput()}_onContextReady(){this.sessionContext.kernelPreference={canStart:!0,shouldStart:!0,autoStartDefault:!1,shutdownOnDispose:!1}}async _changeKernel(e,t){t&&this.sessionContext.changeKernel(t)}_setModelKernelSpec(e,t){this.model.setKernelSpec(t.newValue)}}(a=o||(o={})).fileExtension=".vp4jl",a.fileType="vp4jl",a.trackerNamespace="vp4jl",a.widgetFactory="vp4jl widget factory",a.modelFactory="vp4jl model factory",a.createNewLabelInPalette="New Visual Programming File",a.createNewLabelInFileMenu="Visual Programming File",a.createNewLabelInContextMenu="Visual Programming File",a.caption="Create a new Visual Programming file",a.nodeExtension="vp4jl-node-extension",function(e){e.commandCategory="Visual Programming",e.createNew="vp4jl:create-new",e.run="vp4jl:run",e.copy="vp4jl:copy",e.paste="vp4jl:paste",e.del="vp4jl:delete",e.cut="vp4jl:cut",e.duplicate="vp4jl:duplicate",e.deleteAll="vp4jl:clear",e.clearOutput="vp4jl:clear-output",e.shutdownKernel="vp4jl:shutdown-kernel",e.interruptKernel="vp4jl:interrupt-kernel",e.restartKernel="vp4jl:restart-kernel",e.reconnectKernel="vp4jl:reconnect-kernel",e.changeKernel="vp4jl:change-kernel",e.restartKernelAndRun="vp4jl:restart-kernel-and-run",e.showNodeExtension="vp4jl:show-node-extension",e.hideNodeExtension="vp4jl:hide-node-extension",e.toggleNodeExtension="vp4jl:toggle-node-extension",e.toggleOutput="vp4jl:toggle-output"}(i||(i={}));var k=n(4151),S=n(255);async function N(e="",t={}){const n=S.ServerConnection.makeSettings(),o=k.URLExt.join(n.baseUrl,"vp4jl",e);let a;try{a=await S.ServerConnection.makeRequest(o,t,n)}catch(e){throw new S.ServerConnection.NetworkError(e)}let i=await a.text();if(i.length>0)try{i=JSON.parse(i)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new S.ServerConnection.ResponseError(a,i.message||i);return i}var I=n(7930);function j(){const e={authenticated:!1,Authorization:null,"X-XSRFToken":null},t=S.ServerConnection.makeSettings();if(t.token&&(e.authenticated=!0,e.Authorization=`token ${t.token}`),"undefined"!=typeof document&&(null===document||void 0===document?void 0:document.cookie)){const t=function(e){const t=document.cookie.match("\\b_xsrf=([^;]*)\\b");return null==t?void 0:t[1]}();void 0!==t&&(e.authenticated=!0,e["X-XSRFToken"]=t)}return e}function M({fetching:e,onInstallNodeExtension:t,uninstallNodeExtension:n,enableNodeExtension:o,url:a}){return h().createElement(h().Fragment,null,h().createElement(x.Progress,{enable:e}),h().createElement(x.NodeLibraryList,{title:"INSTALLED",nodeExtensions:{...x.nodeConfigRegistry.getAllNodeConfigs()},onInstall:t,onUninstall:e=>{n(e)},onDisable:e=>{o(e,!1)},onEnable:e=>{o(e,!0)},url:a,tokens:j()}))}class A extends m.ReactWidget{constructor(){super(),this.fetching=!1,this.settings=S.ServerConnection.makeSettings(),this.requestUrl=k.URLExt.join(this.settings.baseUrl,"vp4jl","node_extension_manager"),this.id=o.nodeExtension,this.node.style.background="var(--jp-layout-color1)",this.title.icon=c.extensionIcon,this.title.caption="Node Extension Manager",this.addClass("jp-NodeExtension"),this.addClass("lm-StackedPanel-child"),this.addClass("p-StackedPanel-child")}installNodeExtension(e){const t=JSON.parse(e);for(const e in t.packages)(0,x.LoadPackageToRegistry)(e,t.packages[e]);this.update()}uninstallNodeExtension(e){this.fetching=!0,this.update(),N("node_extension_manager",{method:"DELETE",body:JSON.stringify(e)}).then((t=>{"ok"===t.status&&(x.nodeConfigRegistry.removeNodeConfig(e),this.update())})).catch((e=>{console.error(`The node extension manager appears to be missing.\n${e}`)})).finally((()=>{this.fetching=!1,this.update()}))}enableNodeExtension(e,t){this.fetching=!0,this.update(),N("node_extension_manager",{method:"POST",body:JSON.stringify({name:e,enable:t})}).then((n=>{"ok"===n.status&&(x.nodeConfigRegistry.enableNodeConfig(e,t),this.update())})).catch((e=>{console.error(`The node extension manager appears to be missing.\n${e}`)})).finally((()=>{this.fetching=!1,this.update()}))}render(){return h().createElement(M,{fetching:this.fetching,onInstallNodeExtension:this.installNodeExtension.bind(this),uninstallNodeExtension:this.uninstallNodeExtension.bind(this),enableNodeExtension:this.enableNodeExtension.bind(this),url:this.requestUrl})}}const T=new I.Token("@jupyterlab/vp4jl:INodeExtension","A node package extension panel for visual programming files.\n  This is used to install, uninstall, enable or disable node packages that can be used in the visual programming files.");var R=n(4901);function K(e,t){const n=e=>{let t=e;return"string"==typeof e&&(t=JSON.parse(e||"null")),JSON.stringify(t)};return n(e)===n(t)}class L extends v.DocumentModel{constructor(e){super(e),this._kernelSpec={},this._vpContent=null,this._kernelSpecChanged=new R.Signal(this),this._vpContentChanged=new R.Signal(this),this._vpActions=null,this._toolbarItems={},this._rendermime=null,this.contentChanged.connect(this._setProperties.bind(this))}_setProperties(){const e=JSON.parse(this.toString());this.kernelSpec=e.kernelSpec,this.vpContent=e.vpContent}_setModelContent(){const e=JSON.stringify({vpContent:this.vpContent,kernelSpec:this.kernelSpec});this.toString()!==e&&this.fromString(e)}async setKernelSpec(e){if(!e)return;const t=await e.spec;if(this.isDisposed)return;const n={name:e.name,display_name:null==t?void 0:t.display_name,language:null==t?void 0:t.language};K(this.kernelSpec,n)||(this.kernelSpec=n)}set kernelSpec(e){K(this.kernelSpec,null!=e?e:{})||(this._kernelSpec=e,this._kernelSpecChanged.emit(this._kernelSpec),this._setModelContent())}get kernelSpec(){return this._kernelSpec}setVpContent(e){this.vpContent="string"==typeof e?JSON.parse(""===e?"null":e):e}set vpContent(e){K(this._vpContent,e)||(this._vpContent=e,this._setModelContent())}get vpContent(){return this._vpContent}get kernelSpecChanged(){return this._kernelSpecChanged}get vpContentChanged(){return this._vpContentChanged}get vpActions(){return this._vpActions}setVpActions(e){this._vpActions=e}get toolbarItems(){return this._toolbarItems}setToolbarItems(e){null==e||e.forEach((e=>{this._toolbarItems[e.name]=e}))}get rendermime(){return this._rendermime}setRendermime(e){this._rendermime=e}}class F extends v.TextModelFactory{get name(){return o.modelFactory}createNew(e={}){const t=e.collaborationEnabled&&this.collaborative;return new L({...e,collaborationEnabled:t})}}class O extends v.ABCWidgetFactory{constructor(e,t){super(e),this._mainWidget=null,this._widgets=[],this._widgetId=0,this._onMouseDown=this.deactivateWidgetIfMouseDownOut.bind(this),this._rendermime=t}createNewWidget(e){e.model.setRendermime(this._rendermime);const t=new y("vp_widget_"+ ++this._widgetId,e);return this.onWidgetCreated(t),t.disposed.connect((e=>{this.onWidgetDisposed(e)})),window.requestAnimationFrame(this._addEventListenerToTab.bind(this)),t}deactivateWidgetIfMouseDownOut(e){for(const t of this._widgets){const n=t.node.getBoundingClientRect();!n||0===n.x&&0===n.y&&0===n.width&&0===n.height||(n.x<=e.clientX&&e.clientX<=n.x+n.width&&n.y<=e.clientY&&e.clientY<=n.y+n.height?t.content.activate():t.content.deactivate())}}onWidgetCreated(e){var t;this._widgets.push(e),null===this._mainWidget&&(this._mainWidget=document.getElementById("main")),1===this._widgets.length&&(null===(t=this._mainWidget)||void 0===t||t.addEventListener("mousedown",this._onMouseDown),this._addEventListeners())}onWidgetDisposed(e){var t;this._widgets.splice(this._widgets.indexOf(e),1),0===this._widgets.length&&(null===(t=this._mainWidget)||void 0===t||t.removeEventListener("mousedown",this._onMouseDown),this._removeEventListeners())}_addEventListeners(){document.addEventListener("contextmenu",this._onMouseDown);const e=document.getElementsByClassName("jp-SideBar");for(let t=0;t<e.length;t++){const n=e[t];for(const e of n.getElementsByClassName("lm-TabBar-tab"))e.addEventListener("click",this._onMouseDown)}const t=document.getElementById("jp-top-panel"),n=null==t?void 0:t.getElementsByClassName("lm-MenuBar-item");for(const e of n||[])e.addEventListener("click",this._onMouseDown)}_addEventListenerToTab(){const e=document.getElementById("jp-main-dock-panel");(null==e?void 0:e.getElementsByClassName("lm-mod-current")[0]).addEventListener("click",this._onMouseDown)}_removeEventListeners(){document.removeEventListener("contextmenu",this._onMouseDown);const e=document.getElementsByClassName("jp-SideBar");for(let t=0;t<e.length;t++){const n=e[t];for(const e of n.getElementsByClassName("button"))e.removeEventListener("click",this._onMouseDown)}const t=document.getElementById("jp-top-panel"),n=null==t?void 0:t.getElementsByClassName("lm-MenuBar-item");for(const e of n||[])e.removeEventListener("click",this._onMouseDown)}}var D=n(4543),P=n(5672),W=n(5623);function B(e,t,n,o){return n.factory?n.factory(e):o(null!=t?t:"",e,n)}function V(e,t){const n=function(e){return[{name:"save",factory:t=>W.ToolbarItems.createSaveButton(e,t.context.fileChanged)},{name:"cut",command:i.cut},{name:"copy",command:i.copy},{name:"paste",command:i.paste},{name:"duplicate",command:i.duplicate},{name:"delete",command:i.del},{name:"deleteAll",command:i.deleteAll},{name:"run",command:i.run},{name:"interrupt",command:i.interruptKernel},{name:"restart",command:i.restartKernel},{name:"restart-and-run",command:i.restartKernelAndRun},{name:"spacer",type:"spacer"},{name:"kernelName",factory:e=>P.o.createKernelNameItem(e.sessionContext)},{name:"executionProgress",factory:e=>D.ExecutionIndicator.createExecutionIndicatorItem(e,void 0,void 0)}]}(e),o=(0,m.createDefaultFactory)(e);return e=>{var a;const i=n.map((n=>({name:n.name,widget:B(e,t,n,o)})));return null===(a=e.model)||void 0===a||a.setToolbarItems(i),i}}const U=new I.Token("@jupyterlab/vp4jl:IVPTracker","A widget tracker for visual programming files.\n  Use this if you want to be able to iterate over and interact with file editors\n  created by the application.");class q extends m.WidgetTracker{}const J={id:"vp4jl:plugin",autoStart:!0,requires:[u.IRenderMimeRegistry],provides:U,activate:function(e,t){const n=o,a=new q({namespace:n.trackerNamespace}),i=new O({name:n.widgetFactory,modelName:n.modelFactory,fileTypes:[n.fileType],defaultFor:[n.fileType],toolbarFactory:V(e.commands,n.widgetFactory)},t);return i.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{a.save(t)})),a.add(t)})),e.docRegistry.addWidgetFactory(i),e.docRegistry.addModelFactory(new F),e.docRegistry.addFileType({name:n.fileType,displayName:"VP File",mimeTypes:["text/json","application/json"],extensions:[n.fileExtension],fileFormat:"text",contentType:"file"}),a}},X={id:"vp4jl:Commands",autoStart:!0,requires:[s.ILabShell,U,m.ISessionContextDialogs,r.IFileBrowserFactory,T],optional:[r.IDefaultFileBrowser],activate:function(e,t,n,a,s,r,l){const d=o,u=i,{shell:m}=e,p=()=>G(m,n),h=e=>{var t;if(!p())return!1;const o=Y(n,m,{...e,activate:!1});return!!(null===(t=null==o?void 0:o.model.vpActions)||void 0===t?void 0:t.getSelectedCounts().nodesCount)};e.commands.addCommand(u.createNew,{label:e=>e.isPalette?d.createNewLabelInPalette:e.isContextMenu?d.createNewLabelInContextMenu:d.createNewLabelInFileMenu,caption:d.caption,execute:async t=>{var n;const o=t.cwd||(null===(n=s.tracker.currentWidget)||void 0===n?void 0:n.model.path)||(null==l?void 0:l.model.path)||"",a=await e.commands.execute("docmanager:new-untitled",{path:o,contentType:"file",fileFormat:"text",ext:d.fileExtension,type:"file"});return e.commands.execute("docmanager:open",{path:a.path,factory:d.widgetFactory})}}),e.commands.addCommand(u.run,{label:"Run Visual Programming File",caption:"Run the visual programming file",execute:e=>{const t=Y(n,m,e);null==t||t.execute()},icon:e=>e.toolbar?c.runIcon:void 0,isEnabled:p}),e.commands.addCommand(u.copy,{label:e=>{var t;const o=Y(n,m,{...e,activate:!1});return e.toolbar?(null===(t=null==o?void 0:o.model.vpActions)||void 0===t?void 0:t.getSelectedCounts().nodesCount)?"Copy Nodes":"Copy Node":"Copy"},caption:e=>{var t;const o=Y(n,m,{...e,activate:!1});return(null===(t=null==o?void 0:o.model.vpActions)||void 0===t?void 0:t.getSelectedCounts().nodesCount)?"Copy theses nodes":"Copy this node"},execute:e=>{var t;const o=Y(n,m,e);o&&(null===(t=o.model.vpActions)||void 0===t||t.copySelectedNodeToClipboard())},icon:e=>e.toolbar?c.copyIcon:void 0,isEnabled:e=>h(e)}),e.commands.addCommand(u.paste,{label:"Paste",caption:"Paste from the clipboard",execute:e=>{var t;const o=Y(n,m,e);o&&(null===(t=o.model.vpActions)||void 0===t||t.pasteFromClipboard())},icon:e=>e.toolbar?c.pasteIcon:void 0,isEnabled:e=>h(e)}),e.commands.addCommand(u.del,{label:"Delete",caption:"Delete the selected node",execute:e=>{var t;const o=Y(n,m,e);o&&(null===(t=o.model.vpActions)||void 0===t||t.deleteSelectedElements())},icon:e=>e.toolbar?c.deleteIcon:void 0,isEnabled:e=>h(e)}),e.commands.addCommand(u.cut,{label:"Cut",caption:"Cut the selected node",execute:e=>{var t;const o=Y(n,m,e);o&&(null===(t=o.model.vpActions)||void 0===t||t.cutSelectedNodesToClipboard())},icon:e=>e.toolbar?c.cutIcon:void 0,isEnabled:e=>h(e)}),e.commands.addCommand(u.duplicate,{label:"Duplicate",caption:"Duplicate the selected node",execute:e=>{var t;const o=Y(n,m,e);o&&(null===(t=o.model.vpActions)||void 0===t||t.duplicateSelectedNodes())},icon:e=>e.toolbar?c.duplicateIcon:void 0,isEnabled:e=>h(e)}),e.commands.addCommand(u.deleteAll,{label:"Delete All",caption:"Delete all nodes and edges",execute:e=>{var t;const o=Y(n,m,e);o&&(null===(t=o.model.vpActions)||void 0===t||t.clear())},icon:e=>e.toolbar?c.clearIcon:void 0,isEnabled:p}),e.commands.addCommand(u.interruptKernel,{label:"Interrupt Kernel",caption:"Interrupt the kernel",execute:e=>{var t;const o=Y(n,m,e);if(!o)return;const a=null===(t=o.sessionContext.session)||void 0===t?void 0:t.kernel;return a?a.interrupt():void 0},icon:e=>e.toolbar?c.stopIcon:void 0,isEnabled:p}),e.commands.addCommand(u.restartKernel,{label:"Restart Kernel",caption:"Restart the kernel",execute:e=>{const t=Y(n,m,e);if(t)return a.restart(t.sessionContext)},icon:e=>e.toolbar?c.refreshIcon:void 0,isEnabled:p}),e.commands.addCommand(u.clearOutput,{label:"Clear Output",caption:"Clear the output",execute:e=>{console.log("clear output")},isEnabled:p}),e.commands.addCommand(u.reconnectKernel,{label:"Reconnect to Kernel",caption:"Reconnect to the kernel",execute:e=>{var t;const o=Y(n,m,e);if(!o)return;const a=null===(t=o.context.sessionContext.session)||void 0===t?void 0:t.kernel;return a?a.reconnect():void 0},isEnabled:p}),e.commands.addCommand(u.restartKernelAndRun,{label:"Restart Kernel and Run",caption:"Restart the kernel and re-run the whole file",execute:async t=>{await e.commands.execute(u.restartKernel,{activate:!1})&&await e.commands.execute(u.run)},icon:c.fastForwardIcon,isEnabled:p}),e.commands.addCommand(u.shutdownKernel,{label:"Shut Down Kernel",caption:"Shutdown the kernel",execute:e=>{const t=Y(n,m,e);if(t)return t.context.sessionContext.shutdown()},isEnabled:p}),e.commands.addCommand(u.changeKernel,{label:"Change Kernelâ€¦",execute:e=>{const t=Y(n,m,e);if(t)return a.selectKernel(t.context.sessionContext)},isEnabled:p}),e.commands.addCommand(u.showNodeExtension,{label:"Show Node Packages Manager",execute:()=>{t.activateById(d.nodeExtension)}}),e.commands.addCommand(u.hideNodeExtension,{label:"Hide Node Extension",execute:()=>{t.collapseLeft()}}),e.commands.addCommand(u.toggleNodeExtension,{label:"Node Packages Manager",execute:()=>r.isHidden?e.commands.execute(u.showNodeExtension,void 0):e.commands.execute(u.hideNodeExtension,void 0)}),e.commands.addCommand(u.toggleOutput,{label:"Output Area",execute:e=>{const t=Y(n,m,e);t&&t.toggleOutput()},isEnabled:p})}},$={id:"vp4jl:AttachCommandsToGui",autoStart:!0,requires:[d.IMainMenu,U],optional:[l.ILauncher,m.ICommandPalette],activate:function(e,t,n,o,a){const s=i,r=()=>G(e.shell,n);t.fileMenu.newMenu.addItem({command:s.createNew,rank:30}),t.editMenu.addGroup([{command:s.copy},{command:s.paste},{command:s.duplicate},{command:s.cut},{command:s.del},{command:s.deleteAll}],4),t.runMenu.codeRunners.run.add({id:s.run,isEnabled:r}),t.kernelMenu.kernelUsers.interruptKernel.add({id:s.interruptKernel,isEnabled:r}),t.kernelMenu.kernelUsers.restartKernel.add({id:s.restartKernel,isEnabled:r}),t.kernelMenu.kernelUsers.reconnectToKernel.add({id:s.reconnectKernel,isEnabled:r}),t.runMenu.codeRunners.restart.add({id:s.restartKernelAndRun,isEnabled:r}),t.kernelMenu.kernelUsers.shutdownKernel.add({id:s.shutdownKernel,isEnabled:r}),t.kernelMenu.kernelUsers.changeKernel.add({id:s.changeKernel,isEnabled:r}),t.kernelMenu.kernelUsers.clearWidget.add({id:s.clearOutput,isEnabled:r}),t.editMenu.clearers.clearCurrent.add({id:s.clearOutput,isEnabled:r}),t.viewMenu.addItem({command:s.toggleNodeExtension,rank:9}),t.viewMenu.addItem({command:s.toggleOutput,rank:9}),null==o||o.add({command:s.createNew,category:s.commandCategory,rank:0}),null==a||a.addItem({command:s.createNew,category:s.commandCategory,args:{isPalette:!0}}),e.contextMenu.addItem({command:s.createNew,selector:".jp-DirListing-content",rank:53,args:{isContextMenu:!0}})}},z={id:"vp4jl:Restorer",autoStart:!0,optional:[s.ILayoutRestorer,U],activate:function(e,t,n){const a=o;t&&n&&t.restore(n,{command:"docmanager:open",args:e=>({path:e.context.path,factory:a.widgetFactory}),name:e=>e.context.path})}},H=[J,X,$,z,{id:"vp4jl:NodeExtension",autoStart:!0,optional:[s.ILayoutRestorer],provides:T,activate:function(e,t){const n=new A;return e.shell.add(n,"left"),t&&t.add(n,"vp4jlNodeExtension"),N("node_extension_manager").then((e=>{Object.entries(e.packages).forEach((([e,t])=>{(0,x.LoadPackageToRegistry)(e,t)}))})).catch((e=>{console.error(`The vp4jl server extension appears to be missing.\n${e}`)})),n}},{id:"vp4jl:FixContextMenuClose",autoStart:!0,requires:[s.ILabShell],activate:function(e,t){function n(){e.contextMenu.menu.isAttached&&e.contextMenu.menu.close()}function o(){const e=document.getElementsByClassName("jp-SideBar");if(e.length)for(const t of e)for(const e of t.getElementsByClassName("lm-TabBar-tab"))e.addEventListener("click",n);else window.requestAnimationFrame((()=>{o()}))}t.currentChanged.connect(((e,t)=>{t.oldValue instanceof y&&t.oldValue.content.deactivate(),n()})),window.requestAnimationFrame((()=>{o()}))}}];function G(e,t){return null!==t.currentWidget&&t.currentWidget===e.currentWidget}function Y(e,t,n){const o=e.currentWidget;return!1!==n.activate&&o&&t.activateById(o.id),o}}}]);