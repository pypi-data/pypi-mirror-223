import{p as Q,g as W,j as t,l as E,r as P,e as X,a3 as O,Q as Z,w as M,c as z,y as a,I as m,A as i,z as p,H as u,x as c,D as f,R as V,N as l,k as F,F as T,J as I,G as R,a5 as N,M as B,q as ee,L as H,X as te,K as ie}from"./index-0b85ac09.js";import{B as ae,_ as G,L as Y}from"./ListItem-13203a50.js";import{_ as U,k as j,p as oe,o as re}from"./utils-6da9b08b.js";import{a as se}from"./contextmenu-224584f8.js";import{e as le}from"./eventbus-d154090d.js";import{a as ne,i as me,s as q,k,j as D,r as de,V as ue}from"./VImg-0b02a672.js";import{d as S,e as pe,b as x}from"./VMenu-17c39295.js";import{c as ce,b as _,a as K,V as ye,d as fe}from"./VCard-49371ce3.js";import{V as ge}from"./VTooltip-98b8e750.js";import{b as ve,c as be}from"./layout-815d5a1a.js";import{V as he}from"./VDialog-69cc554b.js";import{V as ke}from"./VCheckboxBtn-f7c239ad.js";import{C as _e}from"./Container-f51d504d.js";import{V as Ve}from"./VToolbar-7dc49a97.js";const Ce=Q({...ne(),...ve()},"VLayout"),$e=W()({name:"VLayout",props:Ce(),setup(v,n){let{slots:y}=n;const{layoutClasses:d,layoutStyles:b,getLayoutItem:h,items:s,layoutRef:w}=be(v);return me(()=>{var C;return t("div",{ref:w,class:[d.value,v.class],style:[b.value,v.style]},[(C=y.default)==null?void 0:C.call(y)])}),{getLayoutItem:h,items:s}}}),we={key:0,xs5:"","pa-5":"",style:{width:"230px",height:"230px","margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},Le={key:0},Te={key:1},Ie={style:{"padding-bottom":"10px"}},De=["onClick"],Re={style:{color:"primary"}},Be={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},He=["innerHTML"],Ae={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Me=E({__name:"InfoHeader",props:{item:{}},setup(v){const n=v,y=P(!1),d=P(),{mobile:b}=X(),h=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,s=O();Z(),M(()=>n.item,async e=>{e&&(d.value=j(n.item,N.FANART)||j(n.item,N.THUMB))},{immediate:!0});const w=function(e){s.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},C=function(e){s.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},L=z(()=>{let e="";return n.item?(n.item.metadata&&n.item.metadata.description?e=n.item.metadata.description:n.item.metadata&&n.item.metadata.copyright?e=n.item.metadata.copyright:"artists"in n.item&&n.item.artists.forEach(function(r){"metadata"in r&&r.metadata.description&&(e=r.metadata.description)}),e=e.replace(`\r
`,"<br /><br /><br />"),e=e.replace("\r","<br /><br />"),e=e.replace(`
`,"<br /><br />"),e):""}),A=z(()=>{const e=b.value?160:260;return L.value.length>e?L.value.substring(0,e)+"...":L.value});return(e,r)=>(a(),m("div",null,[t(K,{variant:"flat",img:c(h),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?u("",!0):(a(),p(de,{key:0,indeterminate:""})),t(q,{width:"100%",height:"100%",cover:"",class:"background-image",src:d.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),e.item?(a(),p($e,{key:1,style:{margin:"0",position:"absolute",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>{var $;return[e.$vuetify.display.mobile?u("",!0):(a(),m("div",we,[e.item.media_type&&(e.item.media_type==c(B).ARTIST||"owner"in e.item)?(a(),m("div",Le,[t(S,{size:"192"},{default:i(()=>[t(U,{item:e.item,height:230,width:230},null,8,["item"])]),_:1})])):(a(),m("div",Te,[t(U,{width:230,item:e.item},null,8,["item"])]))])),f("div",null,[t(ce,null,{default:i(()=>[V(l(e.item.name),1)]),_:1}),f("div",Ie,["version"in e.item&&e.item.version?(a(),p(_,{key:0,class:"caption"},{default:i(()=>[V(l(e.item.version)+" ",1),t(ge,{location:"bottom"},{activator:i(({props:o})=>[c(oe)(e.item.metadata.explicit||!1)?(a(),p(k,F({key:0},o,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):u("",!0)]),default:i(()=>[f("span",null,l(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):u("",!0),"artists"in e.item&&e.item.artists?(a(),p(_,{key:1,class:"title accent--text"},{default:i(()=>[t(k,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(a(!0),m(T,null,I(e.item.artists,(o,g)=>(a(),m("span",{key:o.item_id},[f("a",{style:{color:"accent"},onClick:J=>C(o)},l(o.name),9,De),g+1<e.item.artists.length?(a(),m("span",{key:g,style:{color:"accent"}},l(" / "))):u("",!0)]))),128))]),_:1})):u("",!0),"artist"in e.item&&e.item.artist?(a(),p(_,{key:2,class:"title"},{default:i(()=>[t(k,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),f("a",{onClick:r[0]||(r[0]=o=>C(e.item.artist))},l(e.item.artist.name),1)]),_:1})):u("",!0),"owner"in e.item&&e.item.owner?(a(),p(_,{key:3,class:"title"},{default:i(()=>[t(k,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),f("a",Re,l(e.item.owner),1)]),_:1})):u("",!0),"album"in e.item&&e.item.album?(a(),p(_,{key:4},{default:i(()=>[t(k,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),f("a",{style:{color:"secondary"},onClick:r[1]||(r[1]=o=>{var g;return w((g=e.item)==null?void 0:g.album)})},l(e.item.album.name),1)]),_:1})):u("",!0)]),f("div",Be,[t(D,{color:"primary","prepend-icon":"mdi-play-circle",disabled:!(($=c(ee).selectedPlayer)!=null&&$.available),onClick:r[2]||(r[2]=o=>c(le).emit("playdialog",{items:[e.item],parentItem:e.item,showContextMenuItems:!1}))},{default:i(()=>[V(l(e.$t("play")),1)]),_:1},8,["disabled"]),t(pe,null,{activator:i(({props:o})=>[t(ae,F({icon:"",style:{"margin-top":"-8px"}},o),{default:i(()=>[t(k,{icon:"mdi-dots-vertical"})]),_:2},1040)]),default:i(()=>[t(x,null,{default:i(()=>[(a(!0),m(T,null,I(c(se)([e.item],e.item).filter(o=>o.hide!=!0),(o,g)=>(a(),p(Y,{key:g,title:e.$t(o.label,o.labelArgs),disabled:o.disabled==!0,onClick:J=>o.action?o.action():""},{prepend:i(()=>[t(S,{icon:o.icon},null,8,["icon"])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1}),t(D,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[r[3]||(r[3]=o=>c(H).toggleFavorite(e.item)),r[4]||(r[4]=R(()=>{},["prevent"])),r[5]||(r[5]=R(()=>{},["stop"]))]},null,8,["icon","title"]),t(G,{domain:e.item.provider,size:25,style:{"margin-top":"4px"}},null,8,["domain"])]),A.value?(a(),p(_,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:r[6]||(r[6]=o=>y.value=!y.value)},{default:i(()=>[f("div",{innerHTML:A.value},null,8,He)]),_:1})):u("",!0),e.item&&e.item.metadata.genres?(a(),m("div",Ae,[(a(!0),m(T,null,I(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),o=>(a(),p(ke,{key:o,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[V(l(o),1)]),_:2},1024))),128))])):u("",!0)])]}),_:1})):u("",!0)]),_:1},8,["img"]),t(he,{modelValue:y.value,"onUpdate:modelValue":r[8]||(r[8]=$=>y.value=$),"max-width":"975",width:"auto"},{default:i(()=>[t(K,null,{default:i(()=>[t(ye,{innerHTML:L.value},null,8,["innerHTML"]),t(fe,null,{default:i(()=>[t(D,{color:"primary",block:"",onClick:r[7]||(r[7]=$=>y.value=!1)},{default:i(()=>[V(l(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});const Pe={style:{"margin-bottom":"10px"}},ze={key:0},Fe=["title","onClick"],Ne=["title"],Ue=["src"],et=E({__name:"ProviderDetails",props:{itemDetails:{}},setup(v){const n=function(d){window.open(d,"_blank")},y=function(d,b){return`${H.baseUrl}/preview?provider=${d}&item_id=${encodeURIComponent(b)}`};return(d,b)=>(a(),m("section",Pe,[t(Ve,{color:"transparent",title:d.$t("mapped_providers"),style:{height:"55px"}},null,8,["title"]),t(ue),t(_e,null,{default:i(()=>[t(x,null,{default:i(()=>{var h;return[(a(!0),m(T,null,I((h=d.itemDetails)==null?void 0:h.provider_mappings,s=>(a(),p(Y,{key:s.provider_instance},{prepend:i(()=>[t(G,{domain:s.provider_domain,size:30},null,8,["domain"])]),title:i(()=>[V(l(c(H).providerManifests[s.provider_domain].name),1)]),subtitle:i(()=>[d.itemDetails.media_type==c(B).TRACK?(a(),m("span",ze,l(s.audio_format.content_type)+" | "+l(s.audio_format.sample_rate/1e3)+"kHz/"+l(s.audio_format.bit_depth)+" bits | ",1)):u("",!0),s.url&&!s.provider_domain.startsWith("file")?(a(),m("a",{key:1,style:{opacity:"0.4"},title:d.$t("tooltip.open_provider_link"),onClick:R(w=>n(s.url),["prevent"])},l(s.url),9,Fe)):(a(),m("span",{key:2,style:{opacity:"0.4"},title:s.item_id},l(s.item_id),9,Ne))]),append:i(()=>[s.audio_format.bit_depth>16?(a(),p(q,{key:0,src:c(re),width:"30",class:te(d.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):u("",!0),c(ie)("bp1")&&d.itemDetails.media_type==c(B).TRACK?(a(),m("audio",{key:1,name:"preview",title:"preview",controls:"",src:y(s.provider_domain,s.item_id)},null,8,Ue)):u("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]))}});export{Me as _,et as a};
