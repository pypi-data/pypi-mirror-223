[package]
name = "ella-server"
version= "0.1.5"
edition= "2021"
authors= ["Dexter Duckworth <dexterduck@users.noreply.github.com>"]
license= "MIT OR Apache-2.0"
repository= "https://github.com/CerebusOSS/ella"
description = "Client-server API for the ella datastore."
resolver = "2"

[dependencies]
ella-engine = { path = "../ella-engine" }
ella-common = { features = ["flight"] , path = "../ella-common" }

arrow-flight = { version = "42.0.0", features = ["flight-sql-experimental"] }
tonic = "0.9.2"
prost = "0.11.9"
futures = "0.3.28"
uuid = { version = "1.3.1", features = ["v4", "serde"] }
dashmap = "5.4.0"
datafusion = "27.0.0"
datafusion-proto = "27.0.0"
once_cell = "1.18.0"
tracing = "0.1.37"
flume = "0.10.14"
tokio = { version = "1.27.0" , features = ["sync", "rt-multi-thread", "signal"] }
serde = { version = "1.0.160", features = ["derive"] }
serde_json = "1.0.95"
tower-http = { version = "0.4.1", features = ["trace"] }
jwt = "0.16.0"
hmac = "0.12.1"
sha2 = "0.10.7"

[build-dependencies]
tonic-build = "0.9.2"

# protobuf-src doesn't support Windows
# https://github.com/MaterializeInc/rust-protobuf-native/issues/4
[target.'cfg(not(target_os = "windows"))'.build-dependencies]
protobuf-src = { version = "1.1.0", optional = true }

[features]
default = ["protobuf"]
protobuf = ["dep:protobuf-src"]
