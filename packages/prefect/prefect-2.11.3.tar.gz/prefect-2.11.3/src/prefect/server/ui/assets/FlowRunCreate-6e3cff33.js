import{aW as g,d as h,v as S,E as k,V as D,D as N,ae as x,c as F,a as I,u as e,b as O,w as m,g as T,o as b,i as p,aX as B,aY as J,aZ as U,a_ as V,a9 as d,aU as i}from"./index-196a45a7.js";import{u as E}from"./usePageTitle-c0627feb.js";class M extends g{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const W=h({__name:"FlowRunCreate",setup(f){const t=S(),n=k("deploymentId"),s=D(),y=N("parameters",M,void 0),{deployment:a}=x(n),w=async r=>{var l,o;try{const c=await t.deployments.createDeploymentFlowRun(n.value,r),u=((o=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:o.scheduledTime)??void 0,v=!u,C=U(V,{flowRun:c,flowRunRoute:d.flowRun,router:s,immediate:v,startTime:u});i(C,"success"),s.push(d.deployment(n.value))}catch(c){i("Something went wrong trying to create a flow run","error"),console.error(c)}},_=()=>{s.back()},R=F(()=>a.value?`Create Flow Run for Deployment: ${a.value.name}`:"Create Flow Run for Deployment");return E(R),(r,l)=>{const o=I("p-layout-default");return e(a)?(b(),O(o,{key:0},{header:m(()=>[p(e(B),{deployment:e(a)},null,8,["deployment"])]),default:m(()=>[p(e(J),{deployment:e(a),parameters:e(y),onSubmit:w,onCancel:_},null,8,["deployment","parameters"])]),_:1})):T("",!0)}}});export{W as default};
